{% load static %}
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}בוטיק אריה - מוצרי תינוקות איכותיים{% endblock %}</title>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.cdnfonts.com/css/opendyslexic">
    
    <!-- Font Awesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    
    {% block extra_css %}{% endblock %}
</head>
<body>
    <a class="skip-link" href="#main-content">דלג לתוכן הראשי</a>
    <div class="accessibility-toolbar" id="accessibility-toolbar">
        <button type="button" class="accessibility-toggle" id="accessibility-toggle" aria-expanded="false" aria-controls="accessibility-panel">
            <span aria-hidden="true">♿</span>
            <span class="visually-hidden">פתח תפריט נגישות</span>
        </button>
        <div class="accessibility-panel" id="accessibility-panel" hidden role="region" aria-labelledby="accessibility-panel-title">
            <h2 class="accessibility-panel-title" id="accessibility-panel-title">תפריט נגישות</h2>
            <p class="accessibility-panel-description">בחרו את ההתאמה המתאימה לכם</p>
            <div class="accessibility-controls">
                <button type="button" class="accessibility-control" data-action="increase-font">
                    טקסט גדול יותר
                </button>
                <button type="button" class="accessibility-control" data-action="decrease-font">
                    טקסט קטן יותר
                </button>
                <button type="button" class="accessibility-control" data-action="reset-font">
                    אפס גודל טקסט
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-contrast" aria-pressed="false">
                    + ניגודיות
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-links" aria-pressed="false">
                    הדגשת קישורים
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-text-spacing" aria-pressed="false">
                    ריווח טקסט
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-line-height" aria-pressed="false">
                    גובה שורה
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-text-align" aria-pressed="false">
                    יישור טקסט
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-dyslexia-font" aria-pressed="false">
                    תמיכה בדיסלקסיה
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-big-cursor" aria-pressed="false">
                    סמן בולט
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-tooltips" aria-pressed="false">
                    תיאורי כלי
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-reduce-motion" aria-pressed="false">
                    ביטול הנפשות
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-hide-images" aria-pressed="false">
                    הסתרת תמונות
                </button>
                <button type="button" class="accessibility-control" data-action="toggle-low-saturation" aria-pressed="false">
                    הפחתת צבע
                </button>
                <button type="button" class="accessibility-control" data-action="reset-settings">
                    איפוס כל ההגדרות
                </button>
            </div>
        </div>
    </div>
    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-content">
                <div class="top-bar-spacer"></div>
                <div class="welcome-text">
                    WELCOME TO ARYE
                </div>
                <div class="social-links">
                    <a href="#" class="social-link" aria-label="WhatsApp">
                        <img src="{% static 'images/WATSAPP WHITE.svg' %}" alt="WhatsApp" class="social-icon-svg">
                    </a>
                    <a href="#" class="social-link" aria-label="מייל">
                        <img src="{% static 'images/MAILL WHITE.svg' %}" alt="מייל" class="social-icon-svg">
                    </a>
                    <a href="#" class="social-link" aria-label="Instagram">
                        <img src="{% static 'images/INSTEGRAM WHITE.svg' %}" alt="Instagram" class="social-icon-svg">
                    </a>
                    <a href="#" class="social-link" aria-label="פייסבוק">
                        <img src="{% static 'images/FACEBOOK WHITE.svg' %}" alt="פייסבוק" class="social-icon-svg">
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Header -->
    <header class="main-header" role="banner">
        <div class="container">
            <div class="header-content">
                <!-- Mobile Menu Toggle -->
                <button type="button" class="menu-toggle" aria-label="פתח תפריט ניווט" data-menu-toggle>
                    <span class="menu-toggle-bar"></span>
                    <span class="menu-toggle-bar"></span>
                    <span class="menu-toggle-bar"></span>
                </button>

                <!-- Header Icons -->
                <div class="header-icons">
                    {% if user.is_authenticated %}
                        <a href="{% url 'wishlist' %}" class="icon-link" title="רשימת המשאלות" aria-label="פתח רשימת משאלות">
                            <img src="{% static 'images/ALL_PHOTOS SERCH HAMBURGER_HEART copy.svg' %}" alt="Wishlist" class="header-icon-svg">
                        </a>
                    {% else %}
                        <a href="{% url 'users:login' %}?next=/wishlist/" class="icon-link" title="רשימת המשאלות" aria-label="פתח רשימת משאלות">
                            <img src="{% static 'images/ALL_PHOTOS SERCH HAMBURGER_HEART copy.svg' %}" alt="Wishlist" class="header-icon-svg">
                        </a>
                    {% endif %}
                    {% if user.is_authenticated %}
                        <a href="{% url 'users:profile' %}" class="icon-link" title="אזור אישי" aria-label="כניסה לאזור האישי">
                            <img src="{% static 'images/ALL_PHOTOS SERCH HAMBURGER_ACCOUNT copy.svg' %}" alt="Account" class="header-icon-svg">
                        </a>
                    {% else %}
                        <a href="{% url 'users:login' %}" class="icon-link" title="התחבר" aria-label="התחברות למערכת">
                            <img src="{% static 'images/ALL_PHOTOS SERCH HAMBURGER_ACCOUNT copy.svg' %}" alt="Account" class="header-icon-svg">
                        </a>
                    {% endif %}
                    <button type="button" id="cart-trigger" class="icon-link cart-link" aria-haspopup="dialog" aria-expanded="false" aria-controls="cart-sidebar" aria-label="פתח עגלת הקניות">
                        <img src="{% static 'images/ALL_PHOTOS SERCH HAMBURGER_CART copy 2.svg' %}" alt="Cart" class="header-icon-svg">
                        <span class="cart-count" id="cart-count">{{ cart_count }}</span>
                    </button>
                </div>

                <!-- Logo -->
                <div class="logo">
                    <a href="{% url 'home' %}">
                        <img src="{% static 'images/LOGO-21.png' %}" alt="ARYE בוטיק" class="logo-img">
                    </a>
                </div>

                <!-- Search Box -->
                <div class="search-box desktop-only">
                    <label for="header-search" class="visually-hidden">חיפוש מוצרים</label>
                    <input type="text" id="header-search" class="search-input" placeholder="חיפוש..." name="q">
                    <button type="submit" class="search-button" aria-label="בצע חיפוש">
                        <img src="{% static 'images/ALL_PHOTOS SERCH HAMBURGER_SEARCH.svg' %}" alt="Search" class="search-icon-svg">
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation Menu -->
    <nav class="main-nav" aria-label="תפריט ראשי">
        <div class="container">
            <ul class="nav-menu desktop-nav">
                {% for category in categories %}
                <li class="nav-item">
                    <a href="{% url 'category_detail' category.slug %}" class="nav-link">{{ category.name }}</a>
                </li>
                {% empty %}
                <li class="nav-item">
                    <a href="#" class="nav-link">חיתולי בד / טטרה</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">לחדר השינה</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">סינר פליטה לתינוק</a>
                </li>
                <li class="nav-item">
                    <a href="#" class="nav-link">מגבות לתינוק</a>
                </li>
                {% endfor %}
            </ul>
        </div>
    </nav>

    <!-- Mobile Navigation -->
    <div class="mobile-nav-overlay" data-mobile-nav-overlay></div>
    <aside class="mobile-nav-drawer" aria-hidden="true" aria-labelledby="mobile-nav-title" role="dialog" data-mobile-nav>
        <div class="mobile-nav-header">
            <h2 id="mobile-nav-title">תפריט</h2>
            <button type="button" class="mobile-nav-close" aria-label="סגור תפריט" data-mobile-nav-close>&times;</button>
        </div>
        <nav class="mobile-nav-content" aria-label="תפריט ראשי נייד">
            <ul class="nav-menu mobile-nav-menu">
                {% for category in categories %}
                <li class="nav-item">
                    <a href="{% url 'category_detail' category.slug %}" class="nav-link" data-mobile-nav-link>{{ category.name }}</a>
                </li>
                {% empty %}
                <li class="nav-item"><a href="#" class="nav-link" data-mobile-nav-link>חיתולי בד / טטרה</a></li>
                <li class="nav-item"><a href="#" class="nav-link" data-mobile-nav-link>לחדר השינה</a></li>
                <li class="nav-item"><a href="#" class="nav-link" data-mobile-nav-link">סינר פליטה לתינוק</a></li>
                <li class="nav-item"><a href="#" class="nav-link" data-mobile-nav-link">מגבות לתינוק</a></li>
                {% endfor %}
            </ul>
        </nav>
    </aside>

    <!-- Cart Sidebar -->
    <div id="cart-sidebar-overlay" class="cart-sidebar-overlay" aria-hidden="true"></div>
    <div id="cart-sidebar" class="cart-sidebar" role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="cart-sidebar-title" tabindex="-1">
        <div class="cart-sidebar-header">
            <h2 id="cart-sidebar-title">עגלת קניות (<span id="sidebar-cart-count">0</span>)</h2>
            <button id="cart-sidebar-close" class="cart-sidebar-close" aria-label="סגור עגלת הקניות">&times;</button>
        </div>
        
        <div class="cart-sidebar-content">
            <div id="cart-sidebar-items" class="cart-sidebar-items" role="list">
                <!-- Cart items will be loaded here dynamically -->
            </div>
        </div>
        
        <div class="cart-sidebar-footer">
            <div class="cart-sidebar-summary">
                <div class="summary-row">
                    <span>סכום ביניים</span>
                    <span id="sidebar-subtotal">0 ₪</span>
                </div>
                
                <div class="summary-row shipping-row">
                    <span>משלוח</span>
                    <span id="sidebar-shipping">חינם</span>
                </div>
                
                <div id="sidebar-shipping-notice" class="shipping-notice" style="display: none;">
                    <p>משלוח חינם מעל 75 ₪</p>
                    <p class="remaining-amount">עוד <span id="sidebar-remaining">0</span> ₪ למשלוח חינם</p>
                </div>
                
                <div class="summary-total">
                    <span>סה״כ</span>
                    <span id="sidebar-total">0 ₪</span>
                </div>
            </div>
            
            <a href="{% url 'checkout' %}" class="sidebar-checkout-btn">לקופה</a>
            <button id="sidebar-continue-shopping" class="sidebar-continue-btn">המשך קניה</button>
        </div>
        
        <div id="cart-sidebar-empty" class="cart-sidebar-empty" style="display: none;">
            <p>העגלה שלך ריקה</p>
            <button class="sidebar-continue-btn">המשך קניה</button>
        </div>
    </div>

    <!-- Main Content -->
    <main class="main-content" id="main-content" tabindex="-1">
        <!-- Messages -->
        {% if messages %}
        <div class="messages-container" role="status" aria-live="polite" aria-atomic="true">
            {% for message in messages %}
            <div class="message message-{{ message.tags }}">
                {{ message }}
                <button type="button" class="message-close" aria-label="סגור הודעה">&times;</button>
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <div class="container">
            <div class="footer-content">
                <!-- Newsletter Section -->
                <div class="footer-section newsletter-section">
                    <img src="{% static 'images/ARTBOARD_LOGO WHITE FOOTER.svg' %}" alt="ARYE Logo" class="footer-logo">
                    <h3>הצטרפו לניוזלטר שלנו</h3>
                    <p class="newsletter-subtitle">! קבלו לפני 10% הנחה לרכישה הראשונה שלכם</p>
                    <form class="newsletter-form">
                        <input type="email" class="newsletter-input" placeholder="אימייל">
                        <button type="submit" class="newsletter-button">הצטרפו עכשיו</button>
                    </form>
                    <div class="footer-social">
                        <a href="#" class="footer-social-link">
                            <img src="{% static 'images/FACEBOOK WHITE.svg' %}" alt="Facebook" class="footer-social-icon">
                        </a>
                        <a href="#" class="footer-social-link">
                            <img src="{% static 'images/INSTEGRAM WHITE.svg' %}" alt="Instagram" class="footer-social-icon">
                        </a>
                        <a href="#" class="footer-social-link">
                            <img src="{% static 'images/MAILL WHITE.svg' %}" alt="Email" class="footer-social-icon">
                        </a>
                    </div>
                </div>
                
                <!-- Help + Info Section -->
                <div class="footer-section">
                    <div class="footer-info-wrapper">
                        <h4>עזרה + מידע</h4>
                        <ul class="footer-links">
                            <li><a href="#">אודות</a></li>
                            <li><a href="#">הוראות כביסה</a></li>
                            <li><a href="#">שאלות ותשובות</a></li>
                            <li><a href="#">משלוחים והחזרות</a></li>
                            <li><a href="#">תנאי האתר</a></li>
                            <li><a href="{% url 'accessibility_statement' %}">הצהרת נגישות</a></li>
                        </ul>
                    </div>
                </div>
                
                <!-- Contact Section -->
                <div class="footer-section">
                    <div class="footer-info-wrapper">
                        <h4>צרו קשר</h4>
                        <ul class="footer-contact">
                            <li><a href="{% url 'contact' %}">צור קשר</a></li>
                            <li>אנחנו נמצאים ברחוב הקישון 6 תל אביב.</li>
                            <li>שירות לקוחות וואטסאפ בלבד >> <img src="{% static 'images/WATSAPP WHITE.svg' %}" alt="WhatsApp" class="footer-whatsapp-icon"><br>בטלפון 053-3694264</li>
                            <li>זמני פעילות שירות הלקוחות<br>ימים א' - ה' בין השעות 9:00 - 15:00</li>
                            <li>מוזמנים לפנות אלינו למייל<br>Arye.Boutique@gmail.com</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div class="container">
                <div class="footer-bottom-content">
                    <p class="footer-copyright"><span class="arye-text">ARYE BOUTIQUE</span> <span class="site-by">SITE BY</span> <span class="hadar-levy">HADAR LEVY</span></p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Accessibility Toolbar JavaScript -->
    <script src="{% static 'js/accessibility-toolbar.js' %}"></script>

    <!-- Cart Sidebar JavaScript -->
    <script src="{% static 'js/cart-sidebar.js' %}"></script>

    <!-- Mobile Navigation JavaScript -->
    <script src="{% static 'js/mobile-nav.js' %}"></script>
    
    {% block extra_js %}{% endblock %}
    
    <!-- Messages Close Functionality -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // סגירת הודעות
            const messageCloseButtons = document.querySelectorAll('.message-close');
            messageCloseButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const messageDiv = this.parentElement;
                    messageDiv.style.transition = 'opacity 0.3s ease';
                    messageDiv.style.opacity = '0';
                    setTimeout(() => {
                        messageDiv.remove();
                    }, 300);
                });
            });
            
            // סגירה אוטומטית אחרי 5 שניות
            const messages = document.querySelectorAll('.message');
            messages.forEach(message => {
                setTimeout(() => {
                    message.style.transition = 'opacity 0.3s ease';
                    message.style.opacity = '0';
                    setTimeout(() => {
                        message.remove();
                    }, 300);
                }, 5000);
            });
        });
    </script>
</body>
</html>

